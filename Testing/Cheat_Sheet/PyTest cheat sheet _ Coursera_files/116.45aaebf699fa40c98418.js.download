(window.webpackJsonp=window.webpackJsonp||[]).push([[116,126],{"++4Y":function(module,t,e){"use strict";e.r(t),e.d(t,"styles",function(){return B}),e.d(t,"AttemptPage",function(){return E}),e.d(t,"withRedirectToCover",function(){return F});var n=e("VbXa"),i=e.n(n),r=e("AeFk"),o=e("q1tI"),a=e.n(o),s=e("MnCE"),u=e("+LJP"),c=e("kvW3"),d=e("sQ/U"),m=e("8Hdl"),l=e("l0R+"),p=e("RH4a"),b=e("FtgG"),f=e("3AF4"),v=e("rD/6"),g=e("s3XC"),S=e("pH37"),I=e("pJaO"),y=e("Cio1"),h=e("zaiP"),j=e("v4A+"),O=e("wIYG"),D=e("kIii"),P=e("tcH/"),C=e("LHEl"),R=e("kYu0"),T=e("uAMc"),Q=e("aBK/"),z=e("GZYn"),k=e("8ec0"),x=e("usGt"),A=e("RLfs"),q=e("VtNW"),w=e.n(q),B={header:function header(t){return Object(r.c)({marginBottom:t.spacing(48)})},points:function points(t){return Object(r.c)({marginTop:t.spacing(8)})},submissionGrade:function submissionGrade(t){return Object(r.c)({marginTop:t.spacing(12)})}},E=function(t){function AttemptPage(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).state={showSkillTaggingDialog:!1},e.handleKeepLearningClick=function(t){Object(S.a)(t)?e.props.redirectToNextItem():e.setState({showSkillTaggingDialog:!0})},e}i()(AttemptPage,t);var e=AttemptPage.prototype;return e.componentDidMount=function componentDidMount(){var t=this.props,e=t.shouldRedirectToCover,n=t.redirectToCover;e&&n()},e.render=function render(){var t=this,e=this.props,n=e.redirectToCover,i=e.redirectToNextItem,o=e.addRedirectToCoverToRouteParams,a=e.examSessionId,s=this.state.showSkillTaggingDialog;return Object(r.d)(h.a,null,function(e){var u=e.item;if(!u)return null;return Object(r.d)(y.a,{userId:d.a.get().id,courseId:u.courseId,itemId:u.id},Object(r.d)(R.a,{standardProctorConfigurationId:u.contentSummary&&"exam"===u.contentSummary.typeName&&u.contentSummary.definition.standardProctorConfigurationId||null},function(e){var d=e.shouldShowTimer,S=e.secondsLeftInLatestAttempt,y=e.refetch,h=e.remainingAttempts;return Object(r.d)(g.b,{onClose:n,backbuttonAriaLabel:w()("Back"),headerLeft:Object(r.d)(f.a,{headerText:u.name,itemTypeText:w()("Graded Quiz"),timeCommitment:u.timeCommitment}),headerRight:Object(r.d)(Q.a,{courseId:u.courseId,itemId:u.id,examSessionId:a},function(t){var e=t.isSubmitted;return Object(r.d)(v.a,{deadline:u.deadline,remainingTimeInMs:"number"==typeof S?1e3*S:null,showTimer:d&&!e,timerId:Object(k.a)(u.id)})}),topBanner:Object(r.d)(Q.a,{courseId:u.courseId,itemId:u.id,examSessionId:a},function(e){var i=e.isSubmitted,o,a=(u.contentSummary&&"exam"===u.contentSummary.typeName&&u.contentSummary.definition||{}).passingFraction;if(i&&u.itemGrade){var s,c=(u.itemGrade||{}).isPassed,d=Object(z.b)(c,u.isCumulativeGraded,h);return Object(r.d)(C.a,{courseId:u.courseId,itemId:u.id},function(e){var i=e.lockingConfigurationSummary,o=e.bestEvaluation;return Object(r.d)("div",null,Object(r.d)(b.a,{itemGrade:u.itemGrade,computedScore:(o||{}).score,maxScore:(o||{}).maxScore,passingFraction:a,isCumulativeGraded:u.isCumulativeGraded,onKeepLearningClick:function onKeepLearningClick(){return t.handleKeepLearningClick(u.courseId)},remainingAttempts:h,lockingConfigurationSummary:i,onTryAgainClick:n}),Object(I.b)()&&d===z.a.PASSED&&Object(r.d)(I.a,{courseId:u.courseId,itemId:u.id}))})}return null})},Object(r.d)(j.a,{courseId:u.courseId,itemId:u.id},function(t){var e=t.postQuizSuggestions,n=t.loading;return Object(r.d)(Q.a,{courseId:u.courseId,itemId:u.id,onQuizSessionQueryCompleted:function onQuizSessionQueryCompleted(){return y()},examSessionId:a},function(t){var i=t.quizFormData,a=t.sessionId,s=t.nextSubmissionDraftId,b=t.attemptScore,f=t.totalPoints,v=t.quizQuestions,g=t.isSubmitted,S=t.hasDraft,I=t.isLimitedFeedback;if(!i||n||!v||!a)return Object(r.d)(O.a,null);if(I)return null;var y=v.map(function(t){return t.prompt.id});return Object(r.d)(p.a,{itemId:u.id,courseId:u.courseId},function(t){var n=t.stepState,p=t.setStepState;return Object(r.d)("div",null,Object(r.d)("div",{css:B.header},Object(r.d)(m.a,{variant:"h1semibold",component:"h2"},u.name),g&&"number"==typeof b?Object(r.d)("div",{css:B.submissionGrade},Object(r.d)(m.a,{variant:"h2semibold",component:"span"},w()("Latest Submission Grade #{grade}%",{grade:Object(l.a)(b)}))):Object(r.d)("div",{css:B.points},Object(r.d)(m.a,{variant:"h4bold",component:"span","aria-label":w()("Total available points #{totalPoints}",{totalPoints:f})},Object(r.d)("span",{"aria-hidden":!0},Object(r.d)(c.b,{message:w()("Total points {totalPoints}"),totalPoints:Object(r.d)(m.a,{variant:"body2",component:"span"},f)}))))),Object(r.d)("div",null,Object(r.d)(D.a,{quizFormData:i,isSubmitted:g,postQuizSuggestions:e,stepState:n})),Object(r.d)(T.a,{ids:y,sessionId:a,nextSubmissionDraftId:s},function(t){var e=t.hasUnfilledResponses,i=t.saveDraft,a=t.autoSaveDraft,s=t.submitDraft,c=t.submitLatestSubmissionDraft;return Object(r.d)(P.a,{hasUnfilledResponses:e,itemId:u.id,courseId:u.courseId,saveDraft:i,autoSaveDraft:a,isSubmitted:g,submitDraft:function submitDraft(){return s?s().then(function(){o()}):Promise.reject()},submitLatestSubmissionDraft:function submitLatestSubmissionDraft(){return c?c().then(function(){o()}):Promise.reject()},hasTimer:d,hasDraft:S,stepState:n,setStepState:p})}))})})}),s&&Object(r.d)(A.b,{hideDialogDuringLoading:!1,scrollLockQuerySelector:".rc-TunnelVisionWrapper__content",dialogTitle:w()("Help us identify the right topics"),dialogDescription:w()("Select the skills that are covered in this quiz"),onClose:i,courseId:u.courseId,itemId:u.id}))}))})},AttemptPage}(a.a.Component),F=Object(s.compose)(x.a,Object(u.a)(function(t,e){var n=e.nextItemUrl,i=void 0===n?"":n,r=e.refetchCoverPageData,o=e.refreshProgress,a=function redirectToCover(){r&&r(),t.push({name:"quiz-cover",params:t.params,query:t.location.query}),o()};return{redirectToCover:a,redirectToNextItem:function redirectToNextItem(){i?(t.push(i),o()):a()},addRedirectToCoverToRouteParams:function addRedirectToCoverToRouteParams(){t.push({name:"quiz-attempt",params:t.params,query:{redirectToCover:!0}})},shouldRedirectToCover:t.location.query.redirectToCover}}));t.default=F(E)},A9b0:function(module,t,e){"use strict";e.r(t),e.d(t,"PracticeQuizAttemptPage",function(){return Q}),e.d(t,"withRedirectToCover",function(){return z});var n=e("VbXa"),i=e.n(n),r=e("q1tI"),o=e.n(r),a=e("MnCE"),s=e("8Hdl"),u=e("AeFk"),c=e("+LJP"),d=e("++4Y"),m=e("usGt"),l=e("sQ/U"),p=e("JEIr"),b=e("3AF4"),f=e("rD/6"),v=e("tcH/"),g=e("s3XC"),S=e("Gpyo"),I=e("xmEj"),y=e("w9Ch"),h=e("RH4a"),j=e("zaiP"),O=e("wIYG"),D=e("FtgG"),P=e("kvW3"),C=e("kIii"),R=e("VtNW"),T=e.n(R),Q=function(t){function PracticeQuizAttemptPage(){return t.apply(this,arguments)||this}i()(PracticeQuizAttemptPage,t);var e=PracticeQuizAttemptPage.prototype;return e.componentDidMount=function componentDidMount(){var t=this.props,e=t.shouldRedirectToCover,n=t.redirectToCover;e&&n()},e.render=function render(){var t=this.props,e=t.redirectToCover,n=t.redirectToNextItem,i=t.addRedirectToCoverToRouteParams,r=t.examSessionId;return Object(u.d)(j.a,null,function(t){var o=t.item;if(!o)return null;return Object(u.d)(g.b,{onClose:e,ariaLabel:T()("Practice Quiz"),backbuttonAriaLabel:T()("Back to the Course"),headerLeft:Object(u.d)(b.a,{headerText:o.name,itemTypeText:T()("Practice Quiz"),timeCommitment:o.timeCommitment}),headerRight:Object(u.d)(f.a,{deadline:o.deadline}),topBanner:Object(u.d)(p.a,{slug:o.courseSlug,itemId:o.id,userId:l.a.get().id},function(t){var i=t.bestEvaluation;return Object(u.d)(S.b,{slug:o.courseSlug,itemId:o.id,userId:l.a.get().id,fetchPolicy:"network-only",examSessionId:r},function(t){var r=t.isSubmitted,a,s=(o.contentSummary&&"quiz"===o.contentSummary.typeName&&o.contentSummary.definition||{}).passingFraction,c=Object(y.a)(i),d=c?c>=s:void 0;if(r&&s&&"number"==typeof c)return Object(u.d)(D.a,{passingFraction:s,itemGrade:{grade:c,isPassed:d||!1,isOverridden:!1,latePenaltyRatio:null},onKeepLearningClick:n,onTryAgainClick:e});return null})})},Object(u.d)(S.b,{slug:o.courseSlug,itemId:o.id,userId:l.a.get().id,fetchPolicy:"network-only",examSessionId:r},function(t){var e=t.loading,n=t.practiceQuizFormData,r=t.sessionId,a=t.nextSubmissionDraftId,c=t.practiceQuizQuestions,m=t.totalPoints,l=t.isSubmitted,p=t.hasDraft;if(e||!n||!c)return Object(u.d)(O.a,null);var b=c.map(function(t){return t.prompt.id});return Object(u.d)(h.a,{itemId:o.id,courseId:o.courseId},function(t){var e=t.stepState,c=t.setStepState;return Object(u.d)("div",null,Object(u.d)("div",{css:d.styles.header},Object(u.d)(s.a,{variant:"h1semibold",component:"h2"},o.name),Object(u.d)("div",{css:d.styles.points},Object(u.d)(s.a,{variant:"h4bold",component:"span","aria-label":T()("Total available points #{totalPoints}",{totalPoints:m})},Object(u.d)("span",{"aria-hidden":!0},Object(u.d)(P.b,{message:T()("Total points {totalPoints}"),totalPoints:Object(u.d)(s.a,{variant:"body2",component:"span"},m)}))))),Object(u.d)("div",null,Object(u.d)(C.a,{quizFormData:n,isSubmitted:l,stepState:e})),!l&&Object(u.d)(I.a,{ids:b,sessionId:r,nextSubmissionDraftId:a},function(t){var n=t.saveDraft,r=t.autoSaveDraft,a=t.submitDraft;return Object(u.d)(v.a,{itemId:o.id,courseId:o.courseId,saveDraft:n,autoSaveDraft:r,submitDraft:function submitDraft(){return a?a().then(function(){i()}):Promise.reject()},hasDraft:p,stepState:e,setStepState:c})}))})}))})},PracticeQuizAttemptPage}(o.a.Component),z=Object(a.compose)(m.a,Object(c.a)(function(t,e){var n=e.nextItemUrl,i=void 0===n?"":n,r=e.refetchPracticeQuizCoverPageData,o=e.refreshProgress,a=function redirectToCover(){r&&r(),t.push({name:"practice-quiz-cover",params:t.params,query:t.location.query}),o()};return{redirectToCover:a,redirectToNextItem:function redirectToNextItem(){i?(t.push(i),o()):a()},addRedirectToCoverToRouteParams:function addRedirectToCoverToRouteParams(){t.push({name:"practice-quiz-attempt",params:t.params,query:{redirectToCover:!0}})},shouldRedirectToCover:t.location.query.redirectToCover}}));t.default=z(Q)},Gpyo:function(module,t,e){"use strict";e.d(t,"a",function(){return g}),e.d(t,"c",function(){return y});var n=e("lSNA"),i=e.n(n),r=e("VkAN"),o=e.n(r),a=e("q1tI"),s=e.n(a),u=e("lTCR"),c=e.n(u),d=e("oJmH"),m=e.n(d),l=e("O5zz"),p=e("e9mw"),b=e("LXPe"),f,v;function ownKeys(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){i()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var g={contentRequestBody:{argument:[]}},S={contentRequestBody:[]},I=c()(f||(f=o()(['\n  query practiceQuizSessionMetaDataQuery($itemId: String!, $userId: Int!, $slug: String!, $body: String!) {\n    practiceQuizSessionMetaData(body: $body, itemId: $itemId, userId: $userId, slug: $slug)\n      @rest(\n        type: "RestPracticeQuizSessionMetadata"\n        path: "opencourse.v1/user/{args.userId}/course/{args.slug}/item/{args.itemId}/quiz/session"\n        method: "POST"\n        bodyKey: "body"\n      ) {\n      contentResponseBody @type(name: "RestPracticeQuizSessionDataResponseBody")\n    }\n  }\n']))),y=c()(v||(v=o()(['\n  query practiceQuizDataQuery(\n    $itemId: String!\n    $userId: Int!\n    $slug: String!\n    $sessionId: String!\n    $body: String!\n    $skipFetchingResponses: Boolean!\n  ) {\n    practiceQuizQuestionData(itemId: $itemId, userId: $userId, slug: $slug, sessionId: $sessionId, body: $body)\n      @rest(\n        type: "RestPracticeQuizQuestionGetStateData"\n        path: "opencourse.v1/user/{args.userId}/course/{args.slug}/item/{args.itemId}/quiz/session/{args.sessionId}/action/getState?autoEnroll=false"\n        method: "POST"\n        bodyKey: "body"\n      ) {\n      contentResponseBody @type(name: "RestPracticeQuizQuestionDataResponseBody") {\n        return @type(name: "RestContentResponseBodyReturnObject") {\n          parts\n          questions\n          nextSubmissionDraftId\n        }\n      }\n    }\n    practiceQuizQuestionResponses(itemId: $itemId, userId: $userId, slug: $slug, sessionId: $sessionId, body: $body)\n      @skip(if: $skipFetchingResponses)\n      @rest(\n        type: "RestPracticeQuizLatestSubmissionDraftResponse"\n        path: "opencourse.v1/user/{args.userId}/course/{args.slug}/item/{args.itemId}/quiz/session/{args.sessionId}/action/getLatestSubmissionDraft?autoEnroll=false"\n        method: "POST"\n        bodyKey: "body"\n      ) {\n      contentResponseBody @type(name: "RestPracticeQuizQuestionDataResponseBody") {\n        return @type(name: "RestContentResponseBodyReturnObject") {\n          draft\n        }\n      }\n    }\n  }\n']))),h=function PracticeQuizData(t){var e=t.slug,n=t.itemId,i=t.userId,r=t.fetchPolicy,o=void 0===r?"cache-first":r,a=t.examSessionId,u=t.children,c={slug:e,itemId:n,userId:i};return s.a.createElement(d.Query,{query:I,variables:_objectSpread(_objectSpread({},c),{},{body:S}),fetchPolicy:o,skip:!!a},function(t){var e=t.loading,n=t.data,i=t.refetch;if(e&&!a)return u({loading:e});if(!n)return null;var r=a||((((n||{}).practiceQuizSessionMetaData||{}).contentResponseBody||{}).session||{}).id;return s.a.createElement(d.Query,{query:y,variables:_objectSpread(_objectSpread({},c),{},{sessionId:r,body:g,skipFetchingResponses:!!a}),fetchPolicy:o},function(t){var e,n,o,s,c=t.loading,d=t.data,m=t.refetch,f=t.client;if(c)return u({loading:c});var v=(null==d?void 0:null===(e=d.practiceQuizQuestionData)||void 0===e?void 0:null===(n=e.contentResponseBody)||void 0===n?void 0:n.return)||{},g=v.parts,S=v.questions,I=v.nextSubmissionDraftId,y,h=((null==d?void 0:d.practiceQuizQuestionResponses)||{}).contentResponseBody,j,O=((null==h?void 0:null===(o=h.return)||void 0===o?void 0:null===(s=o.draft)||void 0===s?void 0:s.input)||{}).responses,D=Object(b.a)()?Object(l.a)({parts:g,questions:S,responses:O,examSessionId:a}):Object(p.a)({questions:S,responses:O,examSessionId:a}),P=function refetchPracticeQuizData(){return i().then(function(){return m()})};return u(_objectSpread(_objectSpread({},D),{},{loading:c,practiceQuizFormData:D.quizFormData,sessionId:r,totalPoints:D.totalPoints,isSubmitted:D.isSubmitted,nextSubmissionDraftId:I,hasDraft:D.hasDraft,practiceQuizQuestions:D.quizQuestions,refetchPracticeQuizData:P,client:f}))})})};t.b=h},PvFy:function(module,t,e){"use strict";var n=e("q1tI"),i=e.n(n),r=e("AeFk"),o=e("8Hdl"),a=e("HDKb"),s=e("5mFy"),u=e("7Dw/"),c=e("/96O"),d={root:function root(t){return Object(r.c)({display:"flex",marginTop:t.spacing(48),marginBottom:t.spacing(48)})},accordionRoot:function accordionRoot(t){return Object(r.c)({marginLeft:"-16px",button:{outline:"none"},padding:t.spacing(0)})},numberCell:Object(r.c)({width:"26px"}),contentCell:Object(r.c)({width:"calc(100% - 26px)"}),cmlContainer:function cmlContainer(t){return Object(r.c)({".rc-CML.cml-cui p":{marginBottom:t.spacing(0)}})}},m=function TextBlock(t){var e=t.textBlock,n=t.isCollapsible,i=void 0!==n&&n,m=t.isExpanded,l=void 0!==m&&m,p=Object(r.d)(o.a,{component:"div",variant:"body1",css:d.cmlContainer},Object(r.d)(c.a,{value:null==e?void 0:e.body}));return Object(r.d)("div",{css:d.root},Object(r.d)("div",{css:d.contentCell},i?Object(r.d)("div",{css:d.accordionRoot},Object(r.d)(a.a,{variant:"silent",defaultExpanded:l},Object(r.d)(s.a,{label:null==e?void 0:e.title}),Object(r.d)(u.a,null,p))):p))};t.a=m},"a7+h":function(module,t,e){"use strict";e.d(t,"a",function(){return g});var n=e("VkAN"),i=e.n(n),r=e("q1tI"),o=e.n(r),a=e("lTCR"),s=e.n(a),u=e("oJmH"),c=e.n(u),d=e("kqcj"),m,l,p=s()(m||(m=i()(['\n  mutation practiceQuizSaveSubmissionDraftActionMutation(\n    $itemId: String!\n    $userId: Int!\n    $slug: String!\n    $sessionId: String!\n    $body: String!\n    $additionalParams: String!\n  ) {\n    action(\n      itemId: $itemId\n      userId: $userId\n      slug: $slug\n      sessionId: $sessionId\n      body: $body\n      additionalParams: $additionalParams\n    )\n      @rest(\n        type: "PracticeQuizSaveSubmissionDraftData"\n        path: "opencourse.v1/user/{args.userId}/course/{args.slug}/item/{args.itemId}/quiz/session/{args.sessionId}/action/saveSubmissionDraft?autoEnroll=false{args.additionalParams}"\n        method: "POST"\n        bodyKey: "body"\n      ) {\n      contentResponseBody @type(name: "RestPracticeQuizQuestionDataResponseBody") {\n        return @type(name: "RestContentResponseBodyReturnObject") {\n          nextSubmissionDraftId\n          questions @skip(if: $skipQuestionsField)\n          parts @skip(if: $skipQuestionsField)\n          evaluation\n        }\n      }\n    }\n  }\n']))),b=s()(l||(l=i()(['\n  mutation practiceQuizSubmitResponseActionMutation(\n    $itemId: String!\n    $userId: Int!\n    $slug: String!\n    $sessionId: String!\n    $body: String!\n  ) {\n    action(itemId: $itemId, userId: $userId, slug: $slug, sessionId: $sessionId, body: $body)\n      @rest(\n        type: "PracticeQuizSubmitResponseData"\n        path: "opencourse.v1/user/{args.userId}/course/{args.slug}/item/{args.itemId}/quiz/session/{args.sessionId}/action/submitResponses?autoEnroll=false"\n        method: "POST"\n        bodyKey: "body"\n      ) {\n      contentResponseBody @type(name: "RestPracticeQuizQuestionDataResponseBody") {\n        return @type(name: "RestContentResponseBodyReturnObject") {\n          nextSubmissionDraftId\n          evaluation\n          questions\n          parts\n        }\n      }\n    }\n  }\n']))),f=function SaveDraftMutation(t){var e=t||{},n=e.changedResponses,i=e.nextSubmissionDraftId,r=e.sessionId,a=e.userId,s=e.itemId,c=e.slug;return o.a.createElement(u.Mutation,{mutation:p,update:Object(d.a)(t)},function(e){var o={contentRequestBody:{argument:{id:i,input:{responses:n}}}},u=function saveDraft(){return e({variables:{body:o,sessionId:r,userId:a,itemId:s,slug:c,skipQuestionsField:!0,additionalParams:""}})},d=function autoSaveDraft(){return e({variables:{body:o,sessionId:r,userId:a,itemId:s,slug:c,skipQuestionsField:!0,additionalParams:"&isAutoSaving=true"}})};return t.children({saveDraft:u,autoSaveDraft:d})})},v=function SubmitDraftMutation(t){var e=t||{},n=e.changedResponses,i=e.sessionId,r=e.userId,a=e.itemId,s=e.slug;return o.a.createElement(u.Mutation,{mutation:b,update:Object(d.a)(t)},function(e){var o={contentRequestBody:{argument:{responses:n}}},u=function submitDraft(){return e({variables:{body:o,sessionId:i,userId:r,itemId:a,slug:s}})};return t.children({submitDraft:u})})},g=function PracticeQuizMutations(t){var e=t.ids,n=t.sessionId,i=t.itemId,r=t.courseId,a=t.changedResponses,s=t.children,u=t.slug,c=t.userId,d=t.nextSubmissionDraftId;return o.a.createElement(f,{changedResponses:a,nextSubmissionDraftId:d,sessionId:n,userId:c,itemId:i,slug:u},function(t){var e=t.saveDraft,r=t.autoSaveDraft;return o.a.createElement(v,{changedResponses:a,sessionId:n,userId:c,itemId:i,slug:u},function(t){var n=t.submitDraft;return s({saveDraft:e,autoSaveDraft:r,submitDraft:n})})})},S=g},kIii:function(module,t,e){"use strict";var n=e("q1tI"),i=e.n(n),r=e("PvFy"),o=e("9iH2"),a=e("LXPe"),s=e("uFBg"),u=function QuizPartRenderer(t){var e=t.quizFormData,u=t.isSubmitted,c=t.postQuizSuggestions,d=t.stepState,m=Object(a.a)(),l,p=0;return i.a.createElement(n.Fragment,null,e.map(function(t){if(m&&(null==t?void 0:t.typeName)===s.c||(null==t?void 0:t.typeName)===s.a){var e,n,a,b=t;return(null==b?void 0:b.typeName)!==s.a||l||(l=b),i.a.createElement(r.a,{textBlock:null==b?void 0:b.definition,isCollapsible:(null==b?void 0:b.typeName)===s.a,isExpanded:(null===(e=l)||void 0===e?void 0:null===(n=e.definition)||void 0===n?void 0:n.id)===(null==b?void 0:null===(a=b.definition)||void 0===a?void 0:a.id)})}p+=1;var f=m&&(null==t?void 0:t.definition)||t;return i.a.createElement(o.a,{key:null==f?void 0:f.prompt.id,quizQuestion:f,index:p-1,postQuizSuggestions:(u&&c||[]).find(function(t){return t.id===f.prompt.id}),isReadOnly:!!u,isDisabled:!(null==d||!d.isSaving)||!(null==d||!d.isSubmitting)})}))};t.a=u},kqcj:function(module,t,e){"use strict";var n=e("Gpyo"),i=function practiceQuizActionMutationUpdate(t){return function(e,i){var r=i.data,o=t.itemId,a=t.userId,s=t.slug,u=t.sessionId,c=(((r||{}).action||{}).contentResponseBody||{}).return||null,d=e.readQuery({query:n.c,variables:{itemId:o,userId:a,slug:s,sessionId:u,skipFetchingResponses:!1,body:n.a}}),m=(((d||{}).practiceQuizQuestionData||{}).contentResponseBody||{}).return||null;m&&(m.nextSubmissionDraftId=(c||{}).nextSubmissionDraftId||null,m.questions=(c||{}).questions||m.questions||null,m.parts=(c||{}).parts||m.parts||null,m.evaluation=(c||{}).evaluation||null,e.writeQuery({query:n.c,variables:{itemId:o,userId:a,slug:s,sessionId:u,skipFetchingResponses:!1,body:n.a},data:d}))}};t.a=i},"tcH/":function(module,t,e){"use strict";var n=e("lSNA"),i=e.n(n),r=e("VbXa"),o=e.n(r),a=e("q1tI"),s=e.n(a),u=e("d3Ej"),c=e.n(u),d=e("AeFk"),m=e("HOoY"),l=e("zaiP"),p=e("YmkS"),b=e("qJwm"),f=e("aFpJ"),v=e("CnKM"),g=e("8ec0"),S=e("KvdX"),I=e("rQpo"),y=e("Cqp/"),h=e("ZJgU"),j=e("8xbv"),O=e("PB6g");function ownKeys(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){i()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var D={root:function root(t){return Object(d.c)({margin:t.spacing(48,0)})},buttonsContainer:function buttonsContainer(t){return Object(d.c)({marginTop:t.spacing(32),paddingBottom:t.spacing(48),borderBottom:"1px solid ".concat(t.palette.gray[300]),marginBottom:t.spacing(12)})},saveButton:function saveButton(t){return Object(d.c)({marginLeft:t.spacing(24)})}},P=function(t){function SubmissionControls(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).state={canSubmit:!1,announcement:""},e.onSubmitClick=function(){var t=e.props,n=t.hasUnfilledResponses,i=t.updateAndSubmitDraft,r=t.showModal,o=function trackedUpdateAndSubmitDraft(){return i&&i().then(function(){m.a.trackComponent({namespace:{app:"open_course",page:"item_page"}},{},"submit","quiz")})};n?r({type:S.a.unansweredQuestions,props:{onPrimaryButtonClick:o}}):i&&(e.setAnnouncement(c()("Submitting assignment")),o())},e.enableSubmit=function(){e.setState({canSubmit:!0})},e.disableSubmit=function(){e.setState({canSubmit:!1})},e.autoSubmit=function(){var t=e.props,n=t.showModal,i=t.hideModal,r=t.submitLatestSubmissionDraft;n({type:S.a.timeExpiredModal,props:{onPrimaryButtonClick:i}}),r&&r()},e.startAutoSubmitTimeout=function(){var t=e.props.expiresAt;"number"==typeof t&&(e.autoSubmitTimeout=window.setTimeout(e.autoSubmit,t-Date.now()))},e.setAnnouncement=function(t){e.setState({announcement:t},function(){setTimeout(function(){e.setState({announcement:""})},150)})},e.updateDraft=function(){var t=e.props.updateDraft;t&&(e.setAnnouncement(c()("Saving draft submission")),t().then(function(){e.setAnnouncement(c()("Draft submission saved successfully"))}))},e}o()(SubmissionControls,t);var e=SubmissionControls.prototype;return e.componentDidMount=function componentDidMount(){var t=this.props,e=t.hasDraft,n=t.autoSaveDraft,i=t.submitLatestSubmissionDraft;!e&&n&&n(),i&&this.startAutoSubmitTimeout()},e.componentDidUpdate=function componentDidUpdate(t){var e=this.props.expiresAt;t.expiresAt!==e&&this.autoSubmitTimeout&&(clearTimeout(this.autoSubmitTimeout),this.autoSubmitTimeout=null,this.startAutoSubmitTimeout())},e.componentWillUnmount=function componentWillUnmount(){this.autoSubmitTimeout&&clearTimeout(this.autoSubmitTimeout)},e.render=function render(){var t=this,e=this.props,n=e.stepState,i=n.isSaving,r=n.isSubmitting,o=n.isAutoSaving,a=e.stepState,s=e.setStepState,u=e.updateDraft,m=e.updateAndSubmitDraft,v=this.state,g=v.canSubmit,S=v.announcement,P=i||o,C=P||r;return Object(d.d)(l.a,null,function(e){var n=e.item;if(n&&n.isPremiumGradingLocked)return Object(d.d)("div",null,Object(d.d)(I.a,{courseId:n.courseId}));return Object(d.d)("div",{css:D.root},Object(d.d)("div",null,Object(d.d)(f.a,{onAgreementComplete:t.enableSubmit,onAgreementIncomplete:t.disableSubmit})),Object(d.d)("div",{css:D.buttonsContainer},m&&Object(d.d)(h.a,{iconPosition:"before",icon:r?Object(d.d)(j.a,null):void 0,onClick:t.onSubmitClick,disabled:C||!g,variant:"primary"},r?c()("Submitting…"):c()("Submit")),u&&Object(d.d)(h.a,{iconPosition:"before",icon:P?Object(d.d)(j.a,null):void 0,onClick:t.updateDraft,disabled:!!C,variant:"secondary",css:D.saveButton},P?c()("Saving..."):c()("Save draft"))),Object(d.d)(p.a,{computedItem:n,itemFeedbackType:b.c.Quiz}),Object(d.d)(O.b,{tagName:"span",role:"region","aria-live":"assertive","aria-atomic":!0},S&&Object(d.d)("span",null,S)),Object(d.d)(y.a,{stepState:a,setStepState:s}))})},SubmissionControls}(s.a.Component),C=function SubmissionControlsContainer(t){var e=t.saveDraft,n=t.submitDraft,i=t.hasTimer,r=t.itemId,o=t.isSubmitted;if(!e||!n)return null;if(!i)return Object(d.d)(S.b,null,function(i){var r=i.showModal,a=i.hideModal;return o?null:Object(d.d)(P,_objectSpread(_objectSpread({},t),{},{updateDraft:e,updateAndSubmitDraft:n,showModal:r,hideModal:a}))});return Object(d.d)(v.a,{id:Object(g.a)(r)},function(i){var r=i.expiresAt;return Object(d.d)(S.b,null,function(i){var a=i.showModal,s=i.hideModal;return o?null:Object(d.d)(P,_objectSpread(_objectSpread({},t),{},{updateDraft:e,updateAndSubmitDraft:n,showModal:a,hideModal:s,expiresAt:r}))})})};t.a=C},xmEj:function(module,t,e){"use strict";var n=e("q1tI"),i=e.n(n),r=e("agp5"),o=e("RH4a"),a=e("0n3a"),s=e("zaiP"),u=e("JEIr"),c=e("sQ/U"),d=e("wjH1"),m=e("a7+h"),l=function PracticeQuizActions(t){var e=t.ids,n=t.sessionId,l=t.children,p=t.nextSubmissionDraftId;return i.a.createElement(s.a,null,function(t){var s=t.item;if(!s)return null;var b=s.courseId,f=s.id,v=s.courseSlug;return i.a.createElement(u.a,{userId:c.a.get().id,itemId:f,slug:v},function(t){var u=t.refetch;return i.a.createElement(r.a,{ids:e},function(t){if(!t||!u)return l({});return i.a.createElement(o.a,{itemId:f,courseId:b},function(r){var o=r.stepState,g=r.setStepState,S=t.map(function(t){return{questionInstance:t.id,response:((t.response||{}).definition||{}).value}});return i.a.createElement(m.a,{ids:e,sessionId:n,itemId:f,courseId:b,slug:v,userId:c.a.get().id,changedResponses:S,nextSubmissionDraftId:p},function(e){var n=e.saveDraft,r=e.submitDraft,c=function saveDraft(){if(!o.isSaving&&!o.isSubmitting&&p)return g({isSaving:!0}),n().then(function(){return g({isSaving:!1})}).catch(function(t){return Object(d.a)(t,g)});return Promise.reject()},m=function autoSaveDraft(){if(!o.isAutoSaving&&!o.isSubmitting&&p)return g({isAutoSaving:!0}),n().then(function(){return g({isAutoSaving:!1})}).catch(function(t){return Object(d.a)(t,g)});return Promise.reject()},b=function refetchItemAndEvaluations(){return u().then(function(){return s.refetch()}).catch(function(t){return Object(d.a)(t,g)})},f=function submitDraft(){if(!o.isSubmitting)return g({isSubmitting:!0}),r().then(function(){return g({isSubmitting:!1})}).then(b).catch(function(t){return Object(d.a)(t,g)});return Promise.reject()};return i.a.createElement(a.a,{stepState:o,saveDraft:m,changedResponses:t},function(){return l({saveDraft:c,autoSaveDraft:m,submitDraft:f})})})})})})})};t.a=l}}]);
//# sourceMappingURL=116.45aaebf699fa40c98418.js.map